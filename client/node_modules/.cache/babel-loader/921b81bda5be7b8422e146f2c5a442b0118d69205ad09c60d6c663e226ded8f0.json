{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import\"./adminStyle.css\";import'./apiBase';// ensure axios.defaults.baseURL is set and API base is logged\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminLogin(){const[pass,setPass]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const nav=useNavigate();const doLogin=async()=>{setError('');setLoading(true);try{var _res$data;// use relative path so axios.defaults.baseURL (set by apiBase.js) is applied\nconst res=await axios.post('/api/admin/login',{password:pass});if(res!==null&&res!==void 0&&(_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.token){localStorage.setItem('kg_token',res.data.token);nav('/admin/panel');}else{setError('Login failed: no token returned');}}catch(err){var _err$response,_err$response$data;console.error('Login error',err);const msg=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message||'Login failed';setError(msg);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"main-container2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"center-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Login\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"password\",value:pass,onChange:e=>setPass(e.target.value),placeholder:\"Admin password\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:doLogin,disabled:loading,children:loading?'Logging in…':'Login'}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'crimson',marginTop:8},children:error})]})});}","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","AdminLogin","pass","setPass","loading","setLoading","error","setError","nav","doLogin","_res$data","res","post","password","data","token","localStorage","setItem","err","_err$response","_err$response$data","console","msg","response","message","className","children","type","value","onChange","e","target","placeholder","onClick","disabled","style","color","marginTop"],"sources":["C:/Users/Aarushi Computers/Downloads/keshvam_keshvam_graphic_ready/client/src/AdminLogin.js"],"sourcesContent":["\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport \"./adminStyle.css\"\nimport './apiBase'; // ensure axios.defaults.baseURL is set and API base is logged\n\nexport default function AdminLogin(){\n  const [pass, setPass] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const nav = useNavigate();\n\n  const doLogin = async ()=>{\n    setError('');\n    setLoading(true);\n    try{\n      // use relative path so axios.defaults.baseURL (set by apiBase.js) is applied\n      const res = await axios.post('/api/admin/login', { password: pass });\n      if(res?.data?.token){\n        localStorage.setItem('kg_token', res.data.token);\n        nav('/admin/panel');\n      } else {\n        setError('Login failed: no token returned');\n      }\n    }catch(err){\n      console.error('Login error', err);\n      const msg = err.response?.data?.error || err.message || 'Login failed';\n      setError(msg);\n    }finally{ setLoading(false); }\n  };\n\n  return (\n    <div className=\"main-container2\">\n      <div className=\"center-card\">\n        <h2>Admin Login</h2>\n        <input className=\"input\" type=\"password\" value={pass} onChange={e=>setPass(e.target.value)} placeholder=\"Admin password\"/>\n        <button className=\"btn\" onClick={doLogin} disabled={loading}>{loading? 'Logging in…':'Login'}</button>\n        {error && <div style={{color:'crimson', marginTop:8}}>{error}</div>}\n        {/* <p className=\"hint\">Default admin password: 1234 (change .env)</p> */}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,kBAAkB,CACzB,MAAO,WAAW,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpB,cAAe,SAAS,CAAAC,UAAUA,CAAA,CAAE,CAClC,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAc,GAAG,CAAGZ,WAAW,CAAC,CAAC,CAEzB,KAAM,CAAAa,OAAO,CAAG,KAAAA,CAAA,GAAU,CACxBF,QAAQ,CAAC,EAAE,CAAC,CACZF,UAAU,CAAC,IAAI,CAAC,CAChB,GAAG,KAAAK,SAAA,CACD;AACA,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAhB,KAAK,CAACiB,IAAI,CAAC,kBAAkB,CAAE,CAAEC,QAAQ,CAAEX,IAAK,CAAC,CAAC,CACpE,GAAGS,GAAG,SAAHA,GAAG,YAAAD,SAAA,CAAHC,GAAG,CAAEG,IAAI,UAAAJ,SAAA,WAATA,SAAA,CAAWK,KAAK,CAAC,CAClBC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAEN,GAAG,CAACG,IAAI,CAACC,KAAK,CAAC,CAChDP,GAAG,CAAC,cAAc,CAAC,CACrB,CAAC,IAAM,CACLD,QAAQ,CAAC,iCAAiC,CAAC,CAC7C,CACF,CAAC,MAAMW,GAAG,CAAC,KAAAC,aAAA,CAAAC,kBAAA,CACTC,OAAO,CAACf,KAAK,CAAC,aAAa,CAAEY,GAAG,CAAC,CACjC,KAAM,CAAAI,GAAG,CAAG,EAAAH,aAAA,CAAAD,GAAG,CAACK,QAAQ,UAAAJ,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcL,IAAI,UAAAM,kBAAA,iBAAlBA,kBAAA,CAAoBd,KAAK,GAAIY,GAAG,CAACM,OAAO,EAAI,cAAc,CACtEjB,QAAQ,CAACe,GAAG,CAAC,CACf,CAAC,OAAO,CAAEjB,UAAU,CAAC,KAAK,CAAC,CAAE,CAC/B,CAAC,CAED,mBACEP,IAAA,QAAK2B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9B1B,KAAA,QAAKyB,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B5B,IAAA,OAAA4B,QAAA,CAAI,aAAW,CAAI,CAAC,cACpB5B,IAAA,UAAO2B,SAAS,CAAC,OAAO,CAACE,IAAI,CAAC,UAAU,CAACC,KAAK,CAAE1B,IAAK,CAAC2B,QAAQ,CAAEC,CAAC,EAAE3B,OAAO,CAAC2B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAACI,WAAW,CAAC,gBAAgB,CAAC,CAAC,cAC1HlC,IAAA,WAAQ2B,SAAS,CAAC,KAAK,CAACQ,OAAO,CAAExB,OAAQ,CAACyB,QAAQ,CAAE9B,OAAQ,CAAAsB,QAAA,CAAEtB,OAAO,CAAE,aAAa,CAAC,OAAO,CAAS,CAAC,CACrGE,KAAK,eAAIR,IAAA,QAAKqC,KAAK,CAAE,CAACC,KAAK,CAAC,SAAS,CAAEC,SAAS,CAAC,CAAC,CAAE,CAAAX,QAAA,CAAEpB,KAAK,CAAM,CAAC,EAEhE,CAAC,CACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}