{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aarushi Computers\\\\Downloads\\\\keshvam_keshvam_graphic_ready\\\\client\\\\src\\\\AdminLogin.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport \"./adminStyle.css\";\nimport './apiBase'; // ensure axios.defaults.baseURL is set and API base is logged\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AdminLogin() {\n  _s();\n  const [pass, setPass] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const nav = useNavigate();\n  const doLogin = async () => {\n    setError('');\n    setLoading(true);\n    try {\n      var _res$data;\n      // use relative path so axios.defaults.baseURL (set by apiBase.js) is applied\n      const res = await axios.post('/api/admin/login', {\n        password: pass\n      });\n      if (res !== null && res !== void 0 && (_res$data = res.data) !== null && _res$data !== void 0 && _res$data.token) {\n        localStorage.setItem('kg_token', res.data.token);\n        nav('/admin/panel');\n      } else {\n        setError('Login failed: no token returned');\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Login error', err);\n      const msg = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message || 'Login failed';\n      setError(msg);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-container2\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Admin Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        type: \"password\",\n        value: pass,\n        onChange: e => setPass(e.target.value),\n        placeholder: \"Admin password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        onClick: doLogin,\n        disabled: loading,\n        children: loading ? 'Logging in…' : 'Login'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'crimson',\n          marginTop: 8\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminLogin, \"ngku8afznkP1Fkteh8B1wNlNxhY=\", false, function () {\n  return [useNavigate];\n});\n_c = AdminLogin;\nvar _c;\n$RefreshReg$(_c, \"AdminLogin\");","map":{"version":3,"names":["React","useState","axios","useNavigate","jsxDEV","_jsxDEV","AdminLogin","_s","pass","setPass","loading","setLoading","error","setError","nav","doLogin","_res$data","res","post","password","data","token","localStorage","setItem","err","_err$response","_err$response$data","console","msg","response","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","placeholder","onClick","disabled","style","color","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/Aarushi Computers/Downloads/keshvam_keshvam_graphic_ready/client/src/AdminLogin.js"],"sourcesContent":["\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport \"./adminStyle.css\"\nimport './apiBase'; // ensure axios.defaults.baseURL is set and API base is logged\n\nexport default function AdminLogin(){\n  const [pass, setPass] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const nav = useNavigate();\n\n  const doLogin = async ()=>{\n    setError('');\n    setLoading(true);\n    try{\n      // use relative path so axios.defaults.baseURL (set by apiBase.js) is applied\n      const res = await axios.post('/api/admin/login', { password: pass });\n      if(res?.data?.token){\n        localStorage.setItem('kg_token', res.data.token);\n        nav('/admin/panel');\n      } else {\n        setError('Login failed: no token returned');\n      }\n    }catch(err){\n      console.error('Login error', err);\n      const msg = err.response?.data?.error || err.message || 'Login failed';\n      setError(msg);\n    }finally{ setLoading(false); }\n  };\n\n  return (\n    <div className=\"main-container2\">\n      <div className=\"center-card\">\n        <h2>Admin Login</h2>\n        <input className=\"input\" type=\"password\" value={pass} onChange={e=>setPass(e.target.value)} placeholder=\"Admin password\"/>\n        <button className=\"btn\" onClick={doLogin} disabled={loading}>{loading? 'Logging in…':'Login'}</button>\n        {error && <div style={{color:'crimson', marginTop:8}}>{error}</div>}\n        {/* <p className=\"hint\">Default admin password: 1234 (change .env)</p> */}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}