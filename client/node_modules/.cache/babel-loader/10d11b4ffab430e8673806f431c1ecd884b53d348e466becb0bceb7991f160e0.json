{"ast":null,"code":"\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import { useNavigate } from 'react-router-dom';\n// const API = \"http://localhost:5000\";\n\n// export default function AdminPanel(){\n//   const [file, setFile] = useState(null);\n//   const [category, setCategory] = useState('patrika');\n//   const [items, setItems] = useState([]);\n//   const nav = useNavigate();\n\n//   useEffect(()=>{ const token = localStorage.getItem('kg_token'); if(!token){ nav('/admin'); return; } fetchItems(); },[]);\n\n//   const fetchItems = async ()=>{ const res = await axios.get(`${API}/api/media`); setItems(res.data); };\n//   const upload = async ()=>{\n//     if(!file) return alert('Choose file');\n//     const form = new FormData(); form.append('file', file); form.append('category', category);\n//     const token = localStorage.getItem('kg_token');\n//     await axios.post(`${API}/api/admin/upload`, form, { headers: { Authorization: `Bearer ${token}` } });\n//     fetchItems();\n//   };\n//   const remove = async (id)=>{\n//     if(!confirm('Delete?')) return;\n//     const token = localStorage.getItem('kg_token');\n//     await axios.delete(`${API}/api/admin/${id}`, { headers: { Authorization: `Bearer ${token}` } });\n//     fetchItems();\n//   };\n\n//   return (\n//     <div className=\"admin-wrap\">\n//       <div className=\"center-card\">\n//         <h2>Admin Panel - Upload</h2>\n//         <select value={category} onChange={e=>setCategory(e.target.value)} className=\"input\">\n//           <option value=\"patrika\">Patrika</option>\n//           <option value=\"invitation\">Invitation</option>\n//           <option value=\"plate\">Number Plate</option>\n//           <option value=\"video\">Video</option>\n//         </select>\n//         <input type=\"file\" onChange={e=>setFile(e.target.files[0])} className=\"input\" />\n//         <button className=\"btn\" onClick={upload}>Upload</button>\n//       </div>\n\n//       <div className=\"admin-list\">\n//         <h3>Uploaded Items</h3>\n//         <div className=\"grid\">\n//           {items.map(it=>(\n//             <div className=\"card\" key={it.id}>\n//               {it.mimeType && it.mimeType.startsWith('video') ? (\n//                 <video controls className=\"media\" src={`${API}${it.url}`} />\n//               ) : (\n//                 <img className=\"media\" src={`${API}${it.url}`} alt={it.originalName} />\n//               )}\n//               <div className=\"card-body\">\n//                 <div className=\"name\">{it.originalName}</div>\n//                 <div className=\"cat\">{it.category}</div>\n//                 <button className=\"btn small\" onClick={()=>remove(it.id)}>Delete</button>\n//               </div>\n//             </div>\n//           ))}\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }","map":{"version":3,"names":[],"sources":["C:/Users/Aarushi Computers/Downloads/keshvam_keshvam_graphic_ready/client/src/AdminPanel.js"],"sourcesContent":["\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import { useNavigate } from 'react-router-dom';\n// const API = \"http://localhost:5000\";\n\n// export default function AdminPanel(){\n//   const [file, setFile] = useState(null);\n//   const [category, setCategory] = useState('patrika');\n//   const [items, setItems] = useState([]);\n//   const nav = useNavigate();\n\n//   useEffect(()=>{ const token = localStorage.getItem('kg_token'); if(!token){ nav('/admin'); return; } fetchItems(); },[]);\n\n//   const fetchItems = async ()=>{ const res = await axios.get(`${API}/api/media`); setItems(res.data); };\n//   const upload = async ()=>{\n//     if(!file) return alert('Choose file');\n//     const form = new FormData(); form.append('file', file); form.append('category', category);\n//     const token = localStorage.getItem('kg_token');\n//     await axios.post(`${API}/api/admin/upload`, form, { headers: { Authorization: `Bearer ${token}` } });\n//     fetchItems();\n//   };\n//   const remove = async (id)=>{\n//     if(!confirm('Delete?')) return;\n//     const token = localStorage.getItem('kg_token');\n//     await axios.delete(`${API}/api/admin/${id}`, { headers: { Authorization: `Bearer ${token}` } });\n//     fetchItems();\n//   };\n\n//   return (\n//     <div className=\"admin-wrap\">\n//       <div className=\"center-card\">\n//         <h2>Admin Panel - Upload</h2>\n//         <select value={category} onChange={e=>setCategory(e.target.value)} className=\"input\">\n//           <option value=\"patrika\">Patrika</option>\n//           <option value=\"invitation\">Invitation</option>\n//           <option value=\"plate\">Number Plate</option>\n//           <option value=\"video\">Video</option>\n//         </select>\n//         <input type=\"file\" onChange={e=>setFile(e.target.files[0])} className=\"input\" />\n//         <button className=\"btn\" onClick={upload}>Upload</button>\n//       </div>\n\n//       <div className=\"admin-list\">\n//         <h3>Uploaded Items</h3>\n//         <div className=\"grid\">\n//           {items.map(it=>(\n//             <div className=\"card\" key={it.id}>\n//               {it.mimeType && it.mimeType.startsWith('video') ? (\n//                 <video controls className=\"media\" src={`${API}${it.url}`} />\n//               ) : (\n//                 <img className=\"media\" src={`${API}${it.url}`} alt={it.originalName} />\n//               )}\n//               <div className=\"card-body\">\n//                 <div className=\"name\">{it.originalName}</div>\n//                 <div className=\"cat\">{it.category}</div>\n//                 <button className=\"btn small\" onClick={()=>remove(it.id)}>Delete</button>\n//               </div>\n//             </div>\n//           ))}\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n"],"mappings":";AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}