{"ast":null,"code":"// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import { useNavigate, Link } from 'react-router-dom';   // <-- Add Link\n// import PriceEditor from \"./PriceEditor\";\n// import AdminUpload from \"./AdminUpload\"; // ✅ Add this import\n\n// const API = \"http://localhost:5000\";\n\n// export default function AdminPanel(){\n//   const [file, setFile] = useState(null);\n//   const [category, setCategory] = useState('patrika');\n//   const [title, setTitle] = useState(\"\");\n//   const [price, setPrice] = useState(\"\");\n//   const [items, setItems] = useState([]);\n//   const [loading, setLoading] = useState(false); // ✅ Add this\n\n//   const nav = useNavigate();\n\n//   useEffect(()=>{ \n//     const token = localStorage.getItem('kg_token'); \n//     if(!token){ nav('/admin'); return; } \n//     fetchItems(); \n//   },[]);\n\n//   const fetchItems = async ()=>{\n//     const res = await axios.get(`${API}/api/media`);\n//     setItems(res.data);\n//   };\n\n//   const upload = async ()=>{\n//   if(!file || !title || !price){\n//     return alert(\"Please fill Title, Price and choose File\");\n//   }\n\n//   setLoading(true); // ✅ Start Loading\n\n//   const form = new FormData();\n//   form.append('file', file);\n//   form.append('category', category);\n//   form.append('title', title);\n//   form.append('price', price);\n\n//   const token = localStorage.getItem('kg_token');\n\n//   try {\n//     await axios.post(`${API}/api/admin/upload`, form, {\n//       headers: { Authorization: `Bearer ${token}` }\n//     });\n\n//     setFile(null);\n//     setTitle(\"\");\n//     setPrice(\"\");\n//     fetchItems();\n//     alert(\"✅ Upload Successful\");\n//   } catch(e){\n//     alert(\"❌ Upload Failed\");\n//   }\n\n//   setLoading(false); // ✅ Stop Loading\n// };\n\n//   const remove = async (id) => {\n//   if (!window.confirm(\"Delete this item?\")) return;\n\n//   const token = localStorage.getItem(\"kg_token\");\n\n//   try {\n//     await axios.delete(`${API}/delete/${id}`, {\n//       headers: { Authorization: `Bearer ${token}` }\n//     });\n\n//     alert(\"✅ Deleted Successfully\");\n//     fetchItems(); // refresh list\n//   } catch (err) {\n//     console.log(err);\n//     alert(\"❌ Delete Failed\");\n//   }\n// };\n\n//   return (\n//     <div className=\"admin-wrap\">\n\n//       {/* ✅ Added Button Here */}\n//       <div style={{ textAlign:\"center\", marginBottom:\"20px\" }}>\n//         <Link to=\"/admin/manage-prices\">\n//           <button className=\"btn\" style={{ background:\"#007bff\", color:\"#fff\" }}>\n//             Manage Price List\n//           </button>\n//         </Link>\n//       </div>\n\n//       <div className=\"center-card\">\n//         <h2>Admin Panel - Upload</h2>\n\n//         <input \n//           type=\"text\" \n//           className=\"input\" \n//           placeholder=\"Enter Title\" \n//           value={title}\n//           onChange={e=>setTitle(e.target.value)}\n//         />\n\n//         <input \n//           type=\"number\" \n//           className=\"input\" \n//           placeholder=\"Enter Price\" \n//           value={price}\n//           onChange={e=>setPrice(e.target.value)}\n//         />\n\n//         <select value={category} onChange={e=>setCategory(e.target.value)} className=\"input\">\n//           <option value=\"patrika\">Patrika</option>\n//           <option value=\"invitation\">Invitation</option>\n//           <option value=\"plate\">Number Plate</option>\n//           <option value=\"video\">Video</option>\n//         </select>\n\n//         <input type=\"file\" onChange={e=>setFile(e.target.files[0])} className=\"input\" />\n\n//         <button className=\"btn\" onClick={upload} disabled={loading}>\n//   {loading ? \"Uploading...\" : \"Upload\"}\n// </button>\n\n//       </div>\n\n//       <div className=\"admin-list\">\n//         <h3>Uploaded Items</h3>\n//         <div className=\"grid\">\n//           {items.map(it=>(\n//             <div className=\"card\" key={it.id}>\n//               {it.mimeType && it.mimeType.startsWith('video') ? (\n//                  <video controls className=\"media\" src={it.url} />\n//               ) : (\n//                  <img className=\"media\" src={it.url} alt={it.originalName} />\n//               )}\n\n//               <div className=\"card-body\">\n//                 <div className=\"name\"><b>{it.title}</b></div>\n//                 <div className=\"price\" style={{color:\"var(--blue)\", fontWeight:\"600\"}}>₹ {it.price}</div>\n//                 <div className=\"cat\">{it.category}</div>\n//                 <button className=\"btn small\" onClick={()=>remove(it.id)}>Delete</button>\n//               </div>\n\n//             </div>\n//           ))}\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }","map":{"version":3,"names":[],"sources":["C:/Users/Aarushi Computers/Downloads/keshvam_keshvam_graphic_ready/client/src/AdminPanel.js"],"sourcesContent":["// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import { useNavigate, Link } from 'react-router-dom';   // <-- Add Link\n// import PriceEditor from \"./PriceEditor\";\n// import AdminUpload from \"./AdminUpload\"; // ✅ Add this import\n\n// const API = \"http://localhost:5000\";\n\n// export default function AdminPanel(){\n//   const [file, setFile] = useState(null);\n//   const [category, setCategory] = useState('patrika');\n//   const [title, setTitle] = useState(\"\");\n//   const [price, setPrice] = useState(\"\");\n//   const [items, setItems] = useState([]);\n//   const [loading, setLoading] = useState(false); // ✅ Add this\n\n//   const nav = useNavigate();\n\n//   useEffect(()=>{ \n//     const token = localStorage.getItem('kg_token'); \n//     if(!token){ nav('/admin'); return; } \n//     fetchItems(); \n//   },[]);\n\n//   const fetchItems = async ()=>{\n//     const res = await axios.get(`${API}/api/media`);\n//     setItems(res.data);\n//   };\n\n//   const upload = async ()=>{\n//   if(!file || !title || !price){\n//     return alert(\"Please fill Title, Price and choose File\");\n//   }\n\n//   setLoading(true); // ✅ Start Loading\n\n//   const form = new FormData();\n//   form.append('file', file);\n//   form.append('category', category);\n//   form.append('title', title);\n//   form.append('price', price);\n\n//   const token = localStorage.getItem('kg_token');\n\n//   try {\n//     await axios.post(`${API}/api/admin/upload`, form, {\n//       headers: { Authorization: `Bearer ${token}` }\n//     });\n\n//     setFile(null);\n//     setTitle(\"\");\n//     setPrice(\"\");\n//     fetchItems();\n//     alert(\"✅ Upload Successful\");\n//   } catch(e){\n//     alert(\"❌ Upload Failed\");\n//   }\n\n//   setLoading(false); // ✅ Stop Loading\n// };\n\n//   const remove = async (id) => {\n//   if (!window.confirm(\"Delete this item?\")) return;\n\n//   const token = localStorage.getItem(\"kg_token\");\n\n//   try {\n//     await axios.delete(`${API}/delete/${id}`, {\n//       headers: { Authorization: `Bearer ${token}` }\n//     });\n\n//     alert(\"✅ Deleted Successfully\");\n//     fetchItems(); // refresh list\n//   } catch (err) {\n//     console.log(err);\n//     alert(\"❌ Delete Failed\");\n//   }\n// };\n\n//   return (\n//     <div className=\"admin-wrap\">\n\n//       {/* ✅ Added Button Here */}\n//       <div style={{ textAlign:\"center\", marginBottom:\"20px\" }}>\n//         <Link to=\"/admin/manage-prices\">\n//           <button className=\"btn\" style={{ background:\"#007bff\", color:\"#fff\" }}>\n//             Manage Price List\n//           </button>\n//         </Link>\n//       </div>\n\n//       <div className=\"center-card\">\n//         <h2>Admin Panel - Upload</h2>\n\n//         <input \n//           type=\"text\" \n//           className=\"input\" \n//           placeholder=\"Enter Title\" \n//           value={title}\n//           onChange={e=>setTitle(e.target.value)}\n//         />\n\n//         <input \n//           type=\"number\" \n//           className=\"input\" \n//           placeholder=\"Enter Price\" \n//           value={price}\n//           onChange={e=>setPrice(e.target.value)}\n//         />\n\n//         <select value={category} onChange={e=>setCategory(e.target.value)} className=\"input\">\n//           <option value=\"patrika\">Patrika</option>\n//           <option value=\"invitation\">Invitation</option>\n//           <option value=\"plate\">Number Plate</option>\n//           <option value=\"video\">Video</option>\n//         </select>\n\n//         <input type=\"file\" onChange={e=>setFile(e.target.files[0])} className=\"input\" />\n\n//         <button className=\"btn\" onClick={upload} disabled={loading}>\n//   {loading ? \"Uploading...\" : \"Upload\"}\n// </button>\n\n//       </div>\n\n//       <div className=\"admin-list\">\n//         <h3>Uploaded Items</h3>\n//         <div className=\"grid\">\n//           {items.map(it=>(\n//             <div className=\"card\" key={it.id}>\n//               {it.mimeType && it.mimeType.startsWith('video') ? (\n//                  <video controls className=\"media\" src={it.url} />\n//               ) : (\n//                  <img className=\"media\" src={it.url} alt={it.originalName} />\n//               )}\n\n//               <div className=\"card-body\">\n//                 <div className=\"name\"><b>{it.title}</b></div>\n//                 <div className=\"price\" style={{color:\"var(--blue)\", fontWeight:\"600\"}}>₹ {it.price}</div>\n//                 <div className=\"cat\">{it.category}</div>\n//                 <button className=\"btn small\" onClick={()=>remove(it.id)}>Delete</button>\n//               </div>\n\n//             </div>\n//           ))}\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}